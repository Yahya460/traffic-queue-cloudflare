<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login</title>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
  <div class="wrap">
    <div class="row" style="justify-content:space-between">
      <h2 style="margin:0">Login</h2>
      <span class="pill" id="status">Ready</span>
    </div>

    <div class="card">
      <div class="grid">
        <div class="grid grid2">
          <div>
            <small>Username</small>
            <input id="u" autocomplete="username" placeholder="yusuf / khalid ..."/>
          </div>
          <div>
            <small>Password</small>
            <input id="p" type="password" autocomplete="current-password" placeholder="••••••••"/>
          </div>
        </div>

        <button id="btn">Login</button>

        <small>
          Default admin: <b>yusuf / 2626</b><br/>
          Links: <a href="/staff/">Staff</a> • <a href="/admin/">Admin</a> • <a href="/display/">Display</a>
        </small>
      </div>
    </div>
  </div>

  <script src="/app.js"></script>
  <script>
    const statusEl = App.$("#status");
    const u = App.$("#u");
    const p = App.$("#p");
    const btn = App.$("#btn");

    async function go(){
      try{
        App.setStatus(statusEl, "Signing in...", "info");
        const r = await App.API.login(u.value.trim(), p.value);
        App.setStatus(statusEl, "OK ✅", "ok");
        if(r.role === "admin") location.href = "/admin/";
        else location.href = "/staff/";
      }catch(e){
        App.setStatus(statusEl, "Failed: " + e.message, "err");
      }
    }
    btn.addEventListener("click", go);
    p.addEventListener("keydown", (ev)=>{ if(ev.key==="Enter") go(); });
  </script>
</body>
</html>