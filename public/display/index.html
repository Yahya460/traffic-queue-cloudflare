<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>شاشة العرض</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  font-family: system-ui;
  background:#0f172a;
  color:white;
}
header{
  background:#111827;
  padding:15px;
  text-align:center;
}
header img{
  height:60px;
}
main{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:10px;
  padding:10px;
}
.col{
  background:#1f2933;
  border-radius:12px;
  padding:10px;
  min-height:300px;
}
h2{text-align:center}
#centerImage{
  width:100%;
  max-height:400px;
  object-fit:contain;
}
</style>
</head>

<body>

<header>
  <img src="/logo.png" alt="شعار المعهد">
  <h1>شاشة العرض – معلمي السياقة</h1>
</header>

<main>
  <div class="col">
    <h2>تم النداء (رجال)</h2>
    <div id="men"></div>
  </div>

  <div class="col">
    <h2>الشاشة الرئيسية</h2>
    <img id="centerImage" src="" alt="">
  </div>

  <div class="col">
    <h2>تم النداء (نساء)</h2>
    <div id="women"></div>
  </div>
</main>

<audio id="beep" src="/beep.mp3"></audio>

<script>
async function load(){
  const res = await fetch("/api/state");
  const data = await res.json();

  // صورة الوسط
  if(data.centerImage){
    document.getElementById("centerImage").src = data.centerImage;
  }

  // رجال / نساء
  document.getElementById("men").innerHTML =
    (data.calledMen||[]).map(x=>${x.number} - ${x.time}).join("<br>");

  document.getElementById("women").innerHTML =
    (data.calledWomen||[]).map(x=>${x.number} - ${x.time}).join("<br>");
}

setInterval(load,2000);
</script>

</body>
</html>
